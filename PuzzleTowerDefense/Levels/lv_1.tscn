[gd_scene load_steps=25 format=3 uid="uid://ch16qsighbevk"]

[ext_resource type="PackedScene" uid="uid://vxyr4ruil6fh" path="res://Levels/PlacementTilemap.tscn" id="1_p35ih"]
[ext_resource type="PackedScene" uid="uid://bhbd3rynp5igc" path="res://Entities/Towers/tower.tscn" id="2_3l8bh"]
[ext_resource type="PackedScene" uid="uid://cto0im2mdxsjj" path="res://UI/TowerSelecterUI.tscn" id="2_agi6v"]
[ext_resource type="PackedScene" uid="uid://cagmvc105bvbn" path="res://UI/start_battle_button.tscn" id="3_r35p5"]
[ext_resource type="PackedScene" uid="uid://d18e6djpsf7nv" path="res://UI/PauseMenu.tscn" id="5_bf6vf"]
[ext_resource type="PackedScene" uid="uid://cwydief8v5gow" path="res://UI/WaveInfo.tscn" id="5_l666m"]
[ext_resource type="PackedScene" uid="uid://bfrgsk75sagyp" path="res://Levels/Level_Manager.tscn" id="5_oqwbf"]
[ext_resource type="PackedScene" uid="uid://b55ay3e3q4mm7" path="res://Systems/TurnManager.tscn" id="6_03eko"]
[ext_resource type="PackedScene" uid="uid://dvxf4t1grd3mr" path="res://UI/DefenseInfo.tscn" id="6_xatrf"]
[ext_resource type="Resource" uid="uid://dtxpvd4okykdl" path="res://Custom_Resources/WaveResourceBase.tres" id="9_3gy5m"]
[ext_resource type="Texture2D" uid="uid://qwbnylphyawo" path="res://Assets/UI_assets/TallBackgroundDarker.png" id="9_gfspy"]
[ext_resource type="PackedScene" uid="uid://deebor81fya23" path="res://Entities/Enemies/Tank_Enemy.tscn" id="10_b7rpd"]
[ext_resource type="PackedScene" uid="uid://co0a6exrpdfnw" path="res://Entities/SacredCrystal.tscn" id="10_sl1of"]
[ext_resource type="PackedScene" uid="uid://4uoy01ofpsmh" path="res://Levels/Screens/win_screen.tscn" id="11_cyrn3"]
[ext_resource type="Script" path="res://Custom_Resources/Wave.gd" id="11_egh5a"]
[ext_resource type="PackedScene" uid="uid://dr3xrq1y7yphb" path="res://Entities/Enemies/Fast_Enemy.tscn" id="12_x2iqh"]
[ext_resource type="PackedScene" uid="uid://d2yo1mws0004i" path="res://Entities/Enemies/Connon_Fodder_Enemy.tscn" id="13_m1w50"]

[sub_resource type="Curve2D" id="Curve2D_v0plp"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -34, 160, 0, 0, 0, 0, 225, 160, 0, 0, 0, 0, 223, 412, 0, 0, 0, 0, 477, 413, 0, 0, 0, 0, 478, 293, 0, 0, 0, 0, 351, 291, 0, 0, 0, 0, 353, 96, 0, 0, 0, 0, 736, 98, 0, 0, 0, 0, 739, 478, 0, 0, 0, 0, 926, 479, 0, 0, 0, 0, 927, 163, 0, 0, 0, 0, 1298, 164)
}
point_count = 12

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_d5op4"]
bg_color = Color(0.4, 0.223529, 0.192157, 1)
border_width_top = 2
border_color = Color(0.4, 0.223529, 0.192157, 1)

[sub_resource type="Resource" id="Resource_ecan4"]
script = ExtResource("11_egh5a")
m_numberEnemies = 5
m_enemyScene = ExtResource("10_b7rpd")
path = NodePath("../TileMap/Path2D")

[sub_resource type="Resource" id="Resource_8pedp"]
script = ExtResource("11_egh5a")
m_numberEnemies = 3
m_enemyScene = ExtResource("12_x2iqh")
path = NodePath("../TileMap/Path2D")

[sub_resource type="Resource" id="Resource_j4epb"]
script = ExtResource("11_egh5a")
m_numberEnemies = 4
m_enemyScene = ExtResource("13_m1w50")
path = NodePath("../TileMap/Path2D")

[sub_resource type="Resource" id="Resource_07g7t"]
script = ExtResource("11_egh5a")
m_numberEnemies = 4
m_enemyScene = ExtResource("12_x2iqh")
path = NodePath("../TileMap/Path2D")

[sub_resource type="Resource" id="Resource_mqijl"]
script = ExtResource("11_egh5a")
m_numberEnemies = 8
m_enemyScene = ExtResource("13_m1w50")
path = NodePath("../TileMap/Path2D")

[node name="LV1" type="Node2D"]

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -10
offset_right = 1534.0
offset_bottom = 861.0
color = Color(0.0430392, 0.0430392, 0.0430392, 1)

[node name="TileMap" parent="." groups=["Tilemap"] instance=ExtResource("1_p35ih")]
y_sort_enabled = true
tower_instance = ExtResource("2_3l8bh")

[node name="Path2D" type="Path2D" parent="TileMap"]
curve = SubResource("Curve2D_v0plp")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="StartBattleButton" parent="CanvasLayer" instance=ExtResource("3_r35p5")]
z_index = 1
offset_left = 1167.0
offset_top = 12.0
offset_right = 1378.0
offset_bottom = 121.0

[node name="TowersArray" parent="CanvasLayer" instance=ExtResource("2_agi6v")]

[node name="PauseButton" parent="CanvasLayer" instance=ExtResource("5_bf6vf")]
main_menu = null

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer"]
offset_left = 1160.0
offset_top = 104.0
offset_right = 1304.0
offset_bottom = 144.0
size_flags_horizontal = 0
size_flags_vertical = 3

[node name="HSeparator" type="HSeparator" parent="CanvasLayer/VBoxContainer"]
z_index = 1
layout_mode = 2
theme_override_constants/separation = 4
theme_override_styles/separator = SubResource("StyleBoxFlat_d5op4")

[node name="WaveInfo" parent="CanvasLayer/VBoxContainer" instance=ExtResource("5_l666m")]
layout_mode = 2

[node name="HSeparator2" type="HSeparator" parent="CanvasLayer/VBoxContainer"]
z_index = 1
layout_mode = 2
theme_override_constants/separation = 4
theme_override_styles/separator = SubResource("StyleBoxFlat_d5op4")

[node name="VBoxContainer" parent="CanvasLayer/VBoxContainer" instance=ExtResource("6_xatrf")]
layout_mode = 2

[node name="TallBackground" type="Sprite2D" parent="CanvasLayer"]
z_index = -1
position = Vector2(1232, 320)
texture = ExtResource("9_gfspy")

[node name="LevelManager" parent="." instance=ExtResource("5_oqwbf")]
unique_name_in_owner = true
waves = Array[ExtResource("11_egh5a")]([ExtResource("9_3gy5m"), SubResource("Resource_ecan4"), SubResource("Resource_8pedp"), SubResource("Resource_j4epb"), SubResource("Resource_07g7t"), SubResource("Resource_mqijl")])

[node name="SacredCrystal" parent="." instance=ExtResource("10_sl1of")]
unique_name_in_owner = true
editor_description = "FOR SOME REASON THIS NEEDS TO BE HIGHER IN THE HIERACHY TREE THAN LEVEL AND TURN MANAGER TO WORK"
position = Vector2(1120, 136)
win_screen = ExtResource("11_cyrn3")

[node name="TurnManager" parent="." instance=ExtResource("6_03eko")]
editor_description = "fires the functions from sacred crystal to win and lose the game "

[node name="Timer" parent="TurnManager" index="0"]
wait_time = 0.338

[connection signal="child_entered_tree" from="TileMap/Path2D" to="SacredCrystal" method="_on_path_2d_child_entered_tree"]
[connection signal="child_exiting_tree" from="TileMap/Path2D" to="SacredCrystal" method="_on_path_2d_child_exiting_tree"]

[editable path="TurnManager"]
